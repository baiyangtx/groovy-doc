<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.0.preview.7">
<title>The Groovy Eclipse Maven plugin</title>
<link rel="stylesheet" href="./assets/css/style.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script>document.addEventListener('DOMContentLoaded', prettyPrint)</script>
<link rel="stylesheet" href="assets/css/view-example.css">
<script src='assets/js/jquery-2.1.1.min.js'></script>
<script src='assets/js/view-example.js'></script></head>
<body class="book toc2 toc-left">
<div id="header">
<h1>The Groovy Eclipse Maven plugin</h1>
<span id="revnumber">version 2.4.0-SNAPSHOT</span>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#Groovy-EclipsecompilerpluginforMaven-Howtousethecompilerplugin---SettingupthePOM">1. How to use the compiler plugin—Setting up the POM</a></li>
<li><a href="#Groovy-EclipsecompilerpluginforMaven-Settingupthesourcefolders">2. Setting up the source folders</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#Groovy-EclipsecompilerpluginforMaven-Donothing">2.1. Do nothing</a></li>
<li><a href="#Groovy-EclipsecompilerpluginforMaven-Doalmostnothing">2.2. Do almost nothing</a></li>
<li><a href="#Groovy-EclipsecompilerpluginforMaven-Usethegroovy-eclipse-compilermojoforconfiguringsourcefolders">2.3. Use the <code>groovy-eclipse-compiler</code> mojo for configuring source folders</a></li>
<li><a href="#Groovy-EclipsecompilerpluginforMaven-Usethebuild-helper-maven-plugin">2.4. Use the <code>build-helper-maven-plugin</code></a></li>
</ul>
</li>
<li><a href="#Groovy-EclipsecompilerpluginforMaven-Sampleprojectandsourcecode">3. Sample project and source code</a></li>
<li><a href="#Groovy-EclipsecompilerpluginforMaven-WhyanotherGroovycompilerforMavenWhataboutGMaven">4. Why another Groovy compiler for Maven? What about GMaven?</a></li>
<li><a href="#Groovy-EclipsecompilerpluginforMaven-ProjectLombok">5. Project Lombok</a></li>
<li><a href="#Groovy-EclipsecompilerpluginforMaven-Groovy-Eclipseconfiguratorform2Eclipse">6. Groovy-Eclipse configurator for m2Eclipse</a></li>
<li><a href="#Groovy-EclipsecompilerpluginforMaven-ReleaseBuilds">7. Release Builds</a></li>
<li><a href="#Groovy-EclipsecompilerpluginforMaven-DevelopmentBuilds">8. Development Builds</a></li>
<li><a href="#Groovy-EclipsecompilerpluginforMaven-Wheretofindmoreinformationandaskquestions">9. Where to find more information and ask questions</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Groovy-Eclipse provides a compiler plugin for Maven. Using the compiler
plugin, it is possible to compile your maven projects using the
Groovy-Eclipse compiler.</p>
</div>
<div class="paragraph">
<p>The most recent version of the Groovy-Eclipse-Compiler plugin for maven
is 2.8.0-01.2.9.0-01-SNAPSHOT is now available from
<a href="http://nexus.codehaus.org/snapshots/">http://nexus.codehaus.org/snapshots/</a> .The most recent version of the
groovy-eclipse-batch artifact is 2.1.5-03 (for Groovy 2.1) and 2.0.7-03
(for Groovy 2.0). They are both available from maven central. </p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Groovy-EclipsecompilerpluginforMaven-Howtousethecompilerplugin---SettingupthePOM">1. How to use the compiler plugin—Setting up the POM</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In your plugin section, you must change the compiler used by the
<a href="http://maven.apache.org/plugins/maven-compiler-plugin/">maven-compiler-plugin</a>.
Like the <a href="http://ant.apache.org/manual/Tasks/javac.html">javac ant task</a>,
the maven-compiler-plugin does not actually compile, but rather
delegates the compilation to a different artifact (in our case, the
<code>groovy-eclipse-batch</code> artifact):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="xml language-xml">&lt;build&gt;
...
&lt;plugins&gt;
  &lt;plugin&gt;
    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
    &lt;!-- 2.8.0-01 and later require maven-compiler-plugin 3.0 or higher --&gt;
    &lt;version&gt;3.0&lt;/version&gt;
    &lt;configuration&gt;
      &lt;compilerId&gt;groovy-eclipse-compiler&lt;/compilerId&gt;
      &lt;!-- set verbose to be true if you want lots of uninteresting messages --&gt;
      &lt;!-- &lt;verbose&gt;true&lt;/verbose&gt; --&gt;
    &lt;/configuration&gt;
    &lt;dependencies&gt;
      &lt;dependency&gt;
        &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
        &lt;artifactId&gt;groovy-eclipse-compiler&lt;/artifactId&gt;
        &lt;version&gt;2.8.0-01&lt;/version&gt;
      &lt;/dependency&gt;
      &lt;!-- for 2.8.0-01 and later you must have an explicit dependency on groovy-eclipse-batch --&gt;
      &lt;dependency&gt;
        &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
        &lt;artifactId&gt;groovy-eclipse-batch&lt;/artifactId&gt;
        &lt;version&gt;2.1.5-03&lt;/version&gt;
        &lt;!-- or choose a different compiler version --&gt;
        &lt;!-- &lt;version&gt;1.8.6-01&lt;/version&gt; --&gt;
        &lt;!-- &lt;version&gt;1.7.10-06&lt;/version&gt; --&gt;
&lt;/dependency&gt;
 &lt;/dependencies&gt;
  &lt;/plugin&gt;
  ...
&lt;/plugins&gt;
&lt;/build&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will allow Groovy files to be compiled. The groovy-eclipse-compiler
recognizes all settings supported by the
<a href="http://maven.apache.org/plugins/maven-compiler-plugin/">maven-compiler-plugin</a>.</p>
</div>
<div class="paragraph">
<p>Remember that you still need to specify a groovy artifact as a build
dependency in addition to the <code>maven-compiler-plugin</code> dependency.  The
groovy dependency version should match the compiler version.  Something
like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="xml language-xml">&lt;dependencies&gt;
  ...
  &lt;dependency&gt;
    &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
    &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;
    &lt;version&gt;1.8.6&lt;/version&gt;
  &lt;/dependency&gt;
  ...
&lt;/dependencies&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the groovy-eclipse-compiler and groovy-eclipse-batch artifacts
are available in Maven-central, so there is no need to explicitly
declare any extra repositories.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Groovy-EclipsecompilerpluginforMaven-Settingupthesourcefolders">2. Setting up the source folders</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are several ways to set up your maven project to recognize Groovy
source files</p>
</div>
<div class="sect2">
<h3 id="Groovy-EclipsecompilerpluginforMaven-Donothing">2.1. Do nothing</h3>
<div class="paragraph">
<p>The simplest way to set up your source folders is to do nothing at all:
add all of your Groovy files to <code>src/main/java</code> and <code>src/test/java</code>.
This requires absolutely no extra configuration and is easy to
implement. However, this is not a standard maven approach to setting up
your project. If you require a more standard maven approach, then it is
possible to put your Groovy files in <code>src/main/groovy</code> and
<code>src/test/groovy</code> and you Java files in <code>src/main/java</code> and
<code>src/test/java</code>. There are several ways of doing this.</p>
</div>
</div>
<div class="sect2">
<h3 id="Groovy-EclipsecompilerpluginforMaven-Doalmostnothing">2.2. Do almost nothing</h3>
<div class="paragraph">
<p>If there is <em>at least one</em> file (Java or not) in <code>src/main/java</code>, then
all files in <code>src/main/groovy</code> will be found. If, however,
<code>src/main/java</code> is empty, then <code>src/main/groovy</code> will be ignored. You
can get around this by placing an empty file in <code>src/main/java</code> just so
that <code>src/main/groovy</code> will be recognized. The same is true for
<code>src/test/java</code> and <code>src/test/groovy</code>. This is actually a workaround for
<a href="http://jira.codehaus.org/browse/GRECLIPSE-1221">GRECLIPSE-1221</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Groovy-EclipsecompilerpluginforMaven-Usethegroovy-eclipse-compilermojoforconfiguringsourcefolders">2.3. Use the <code>groovy-eclipse-compiler</code> mojo for configuring source folders</h3>
<div class="paragraph">
<p>(You only need this approach if your project has an empty
<code>src/main/java</code> or <code>src/test/java</code>.)</p>
</div>
<div class="paragraph">
<p>If your project has no Java files and you don’t want to add an empty
file in <code>src/main/java</code>, then you can configure source files by
referencing the groovy-eclipse-compiler mojo. Just add this to the
<code>plugins</code> section of your pom:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="xml language-xml">&lt;build&gt;
  ...
  &lt;plugin&gt;
    &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
    &lt;artifactId&gt;groovy-eclipse-compiler&lt;/artifactId&gt;
    &lt;version&gt;2.8.0-01&lt;/version&gt;
    &lt;extensions&gt;true&lt;/extensions&gt;
  &lt;/plugin&gt;
  ...
&lt;/build&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;extensions&gt;true&lt;/extensions&gt;</code> section is important because this
redefines the default lifecycle of your project so that an extra phase
is added. This phase has an extra goal attached to it that adds the two
Groovy source folders.</p>
</div>
</div>
<div class="sect2">
<h3 id="Groovy-EclipsecompilerpluginforMaven-Usethebuild-helper-maven-plugin">2.4. Use the <code>build-helper-maven-plugin</code></h3>
<div class="paragraph">
<p>(You only need this approach if your project has an empty
<code>src/main/java</code> or <code>src/test/java</code>.)</p>
</div>
<div class="paragraph">
<p>The <code>build-helper-maven-plugin</code> allows you to do things like adding
extra source folders to your project without needing to redefine the
default lifecycle. You need to add this configuration to your build
plugin section:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="xml language-xml">&lt;build&gt;
  ...
  &lt;plugin&gt;
    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
    &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.5&lt;/version&gt;
    &lt;executions&gt;
      &lt;execution&gt;
        &lt;id&gt;add-source&lt;/id&gt;
        &lt;phase&gt;generate-sources&lt;/phase&gt;
        &lt;goals&gt;
          &lt;goal&gt;add-source&lt;/goal&gt;
        &lt;/goals&gt;
        &lt;configuration&gt;
          &lt;sources&gt;
            &lt;source&gt;src/main/groovy&lt;/source&gt;
          &lt;/sources&gt;
        &lt;/configuration&gt;
      &lt;/execution&gt;
      &lt;execution&gt;
        &lt;id&gt;add-test-source&lt;/id&gt;
        &lt;phase&gt;generate-test-sources&lt;/phase&gt;
        &lt;goals&gt;
          &lt;goal&gt;add-test-source&lt;/goal&gt;
        &lt;/goals&gt;
        &lt;configuration&gt;
          &lt;sources&gt;
            &lt;source&gt;src/test/groovy&lt;/source&gt;
          &lt;/sources&gt;
        &lt;/configuration&gt;
      &lt;/execution&gt;
    &lt;/executions&gt;
  &lt;/plugin&gt;
  ...
&lt;/build&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The benefit of using this approach is that you do not need to make any
changes to the default lifecycle. The downside is, of course, that you
need 31 lines of configuration to do this!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Groovy-EclipsecompilerpluginforMaven-Sampleprojectandsourcecode">3. Sample project and source code</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There is an archetype available for this project. You can use it through
a command like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="xml language-xml">mvn archetype:generate \
    -DarchetypeGroupId=org.codehaus.groovy \
    -DarchetypeArtifactId=groovy-eclipse-quickstart \
    -DarchetypeVersion=2.5.2-01 \
    -DgroupId=foo \
    -DartifactId=bar \
    -Dversion=1 \
    -DinteractiveMode=false \
    -DarchetypeRepository=https://nexus.codehaus.org/content/repositories/snapshots/</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>(This archetype is not actively maintained.)</em></p>
</div>
<div class="paragraph">
<p>A
<a href="https://svn.codehaus.org/groovy/eclipse/trunk/extras/groovy-eclipse-maven-tests">sample
project</a> using the compiler plugin as well as the source code for the
plugin itself are available from the
<a href="https://github.com/groovy/groovy-eclipse/">github repository</a>:</p>
</div>
<div class="paragraph">
<p>The full URL to the maven projects
is:https://github.com/groovy/groovy-eclipse/tree/master/extrasThere are
several projects in the repository:groovy-eclipse-compiler : the
compiler plugin itself (an m2eclipse
project).groovy-eclipse-batch-builder : a set of ant scripts and
configuration files used to build the groovy-eclipse-batch artifact.
This artifact is an amalgamation of all jars required for compiling
Groovy and Java code in Eclipse, including ecj (the Eclipse compiler for
Java), the non-UI components of Groovy-Eclipse, the Groovy jars, and
various required Eclipse bundles.groovy-eclipse-maven-tests : a sample
project that uses the compiler plugin (an m2eclipse
project).org.codehaus.groovy.m2eclipse : an Eclipse plugin that provides
integration between Groovy-Eclipse and m2eclipse (the Maven tooling for
Eclipse).Feature org.codehaus.groovy.m2eclipse : an Eclipse feature that
is required for building and releasing the org.codehaus.groovy.m2eclipse
plugin.</p>
</div>
<div class="paragraph">
<p>The sample project and archetype is not maintained as well as we would
like. Some community help with this would be greatly appreciated. Please
see <a href="http://jira.codehaus.org/browse/GRECLIPSE-1285">GRECLIPSE-1285</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Groovy-EclipsecompilerpluginforMaven-WhyanotherGroovycompilerforMavenWhataboutGMaven">4. Why another Groovy compiler for Maven? What about GMaven?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>GMaven 2.0 and later no longer supports compilation.  You can read more
about this on the <a href="http://groovy.github.io/gmaven/">GMaven 2 project
page</a>. <a href="#section-gmaven">GMaven 1.x</a> is now deprecated.</p>
</div>
<div class="paragraph">
<p>GMaven 1.x had limitations over the groovy-eclipse-compiler and for the
following reasons GMaven 2.0 compilation is no longer supported:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The compiler plugin does not require the creation of Java stubs so
that your Groovy files can compile against Java files. This will prevent
some arcane compile errors from appearing.</p>
</li>
<li>
<p>The Groovy-Eclipse compiler is the same inside Eclipse and inside
Maven, and so configuration across the two platforms can be simplified.</p>
</li>
<li>
<p>The compiler plugin is a
<a href="http://maven.apache.org/plugins/maven-compiler-plugin/non-javac-compilers.html">standard
compiler plugin</a> for Maven. It therefore follows all allows all the same
standard configuration that the Javac compiler plugin uses. This makes
it simpler to introduce Groovy into an existing Maven project. All you
need to do is change the compiler plugin that the pom references.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>There are still some reasons to use GMaven:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>GroovyDoc tool is not supported because the compiler plugin does not
produce stubs.</p>
</li>
<li>
<p>Groovy Mojos are not supported.</p>
</li>
<li>
<p>Groovy scripts cannot be executed in your poms.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Whether or not the Groovy-Eclipse compiler plugin for Maven is
appropriate for your project will depend on your requirements.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Groovy-EclipsecompilerpluginforMaven-ProjectLombok">5. Project Lombok</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://projectlombok.org/">Project Lombok</a> is compatible with the
groovy-eclipse-compiler.  There is some extra configuration that you
need to do.  The lombok jar needs to be added to <em>both the build and
compile dependencies sections</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="xml language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
  &lt;artifactId&gt;lombok&lt;/artifactId&gt;
  &lt;version&gt;0.10.4&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also, the following configuration needs to be added to the
maven-compiler-plugin configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="xml language-xml">&lt;configuration&gt;
  &lt;compilerId&gt;groovy-eclipse-compiler&lt;/compilerId&gt;
  &lt;verbose&gt;true&lt;/verbose&gt;
  &lt;compilerArguments&gt;
    &lt;javaAgentClass&gt;lombok.core.Agent&lt;/javaAgentClass&gt;
  &lt;/compilerArguments&gt;
  &lt;fork&gt;true&lt;/fork&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Groovy-EclipsecompilerpluginforMaven-Groovy-Eclipseconfiguratorform2Eclipse">6. Groovy-Eclipse configurator for m2Eclipse</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you are going to be working with your maven project inside of
Eclipse, it is strongly recommended that you use
<a href="http://eclipse.org/m2e">m2eclipse</a>. And to use your Groovy projects with
m2eclipse, you will need to install the Groovy-Eclipse configurator for
m2eclipse. This feature is available any of the Groovy-Eclipse update
sites (e.g., nightly, milestone, or release). Just go to your Eclipse
update manager and add the Groovy-Eclipse update sites (if you haven’t
done so already). Select the <em>Groovy-Eclipse M2E integration</em>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Groovy-EclipsecompilerpluginforMaven-ReleaseBuilds">7. Release Builds</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all" style="width: 100%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eclipse level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Release update site</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.2 (Juno)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://dist.springsource.org/release/GRECLIPSE/e4.2">http://dist.springsource.org/release/GRECLIPSE/e4.2</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.7 (Indigo)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://dist.springsource.org/release/GRECLIPSE/e3.7">http://dist.springsource.org/release/GRECLIPSE/e3.7</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="Groovy-EclipsecompilerpluginforMaven-DevelopmentBuilds">8. Development Builds</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all" style="width: 100%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eclipse level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Development update site</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.2 (Juno)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://dist.springsource.org/snapshot/GRECLIPSE/e4.2">http://dist.springsource.org/snapshot/GRECLIPSE/e4.2</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.7 (Indigo)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://dist.springsource.org/snapshot/GRECLIPSE/e3.7">http://dist.springsource.org/snapshot/GRECLIPSE/e3.7</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Groovy-Eclipse configurator for m2eclipse is not compatible with
AspectJ or Scala.  So you cannot use a joint AspectJ/Scala/Groovy
project in Eclipse. These languages must be separated into separate
sub-projects.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Groovy-EclipsecompilerpluginforMaven-Wheretofindmoreinformationandaskquestions">9. Where to find more information and ask questions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please ask all questions on the Groovy-Eclipse mailing list. Any bugs or
feature enhancements should go on Groovy-Eclipse’s jira.</p>
</div>
<div class="paragraph">
<p>The compiler plugin was originally described
<a href="http://contraptionsforprogramming.blogspot.com/2010/09/where-are-all-my-stubs.html">here</a>
and
<a href="http://contraptionsforprogramming.blogspot.com/2010/10/more-on-groovy-eclipse-and-maven.html">here</a>,
but these posts are no longer updated and this page will always contain
the more recent information.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 2.4.0-SNAPSHOT<br>
Last updated 2014-07-10 23:39:15 CST
</div>
</div>
</body>
</html>